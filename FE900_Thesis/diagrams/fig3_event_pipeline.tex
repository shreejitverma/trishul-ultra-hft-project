\begin{tikzpicture}[node distance=1.2cm, auto, >=latex']
    \tikzstyle{thread} = [circle, draw, fill=blue!10, text width=4em, text centered]
    \tikzstyle{buffer} = [rectangle, draw, fill=gray!10, text width=8em, minimum height=2em, rounded corners]
    \tikzstyle{barrier} = [rectangle, draw, fill=red!10, text width=0.5em, minimum height=2em]

    % Ring Buffer
    \node [buffer] (ring) {Lock-Free Ring Buffer};
    
    % Producer
    \node [thread, left=of ring] (prod) {MD Thread};
    \node [barrier, left=0.1cm of ring] (seq_p) {};
    
    % Consumers
    \node [barrier, right=0.1cm of ring] (seq_c) {};
    \node [thread, right=of ring, yshift=1cm] (strat) {Strategy Thread};
    \node [thread, right=of ring, yshift=-1cm] (log) {Logger Thread};

    % Wiring
    \path [draw, ->, thick] (prod) -- node[above, scale=0.7] {Publish(Seq)} (seq_p);
    \path [draw, ->, thick] (seq_p) -- (ring);
    \path [draw, ->, thick] (ring) -- (seq_c);
    \path [draw, ->, thick] (seq_c) -- node[above, scale=0.7] {Claim(Seq)} (strat);
    \path [draw, ->, thick] (seq_c) -- (log);
    
    % Feedback (Gating)
    \path [draw, dashed, ->] (strat) to[bend right=45] node[below, scale=0.7] {Gating Sequence} (prod);

\end{tikzpicture}
