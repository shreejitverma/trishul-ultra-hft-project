\begin{tikzpicture}[node distance=1.5cm, auto, >=latex']
    \tikzstyle{process} = [rectangle, draw, fill=green!10, text width=6em, text centered, rounded corners, minimum height=3em]
    \tikzstyle{memory} = [rectangle, draw, fill=yellow!10, text width=6em, text centered, minimum height=4em]
    \tikzstyle{stream} = [draw, -latex', line width=1.5pt]

    % Input
    \node [process] (feed) {Normalized Tick Stream};

    % Book Logic
    \node [process, right=of feed] (logic) {Book Update Logic}
    \node [memory, above=of logic] (map) {Order ID Map (HashMap)}
    \node [memory, below=of logic] (levels) {Price Levels (Flat Array)}

    % Output Stream
    \node [process, right=of logic] (diff) {Diff Generator}
    \node [process, right=of diff] (pub) {Event Publisher}

    % Consumers
    \node [process, above=of pub, xshift=2cm] (strat) {Strategy}
    \node [process, below=of pub, xshift=2cm] (risk) {Risk Monitor}

    % Wiring
    \path [stream] (feed) -- (logic)
    \path [stream, <->] (logic) -- (map)
    \path [stream, <->] (logic) -- (levels)
    \path [stream] (logic) -- node[above, scale=0.7] {BBO Change} (diff)
    \path [stream] (diff) -- (pub)
    \path [stream] (pub) -- (strat)
    \path [stream] (pub) -- (risk)

\end{tikzpicture}
